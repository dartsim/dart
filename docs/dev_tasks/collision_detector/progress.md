# Collision Detector Task - Progress

## Status
- Phase 2 (core implementation) is in progress.
- Core data and broadphase scaffolding are in place, with AABB caching.
- Narrowphase supports sphere, box, cylinder, and plane primitives.
- Raycast is available for the supported primitives with AABB pruning.
- Distance query MVP is implemented for supported primitives with sweep and AABB pruning.
- Raycast tests now cover box, cylinder, and plane hits.
- Core/adapter boundary decisions are captured in the architecture proposal.
- Distance tests now cover sphere-plane, sphere-box, sphere-cylinder, and box-cylinder nearest points.
- Raycast tests now include inside-hit cases for sphere, box, and cylinder.
- Distance tests include rotated box coverage, and raycast tests include a rotated plane hit.
- Raycast tests include tangent sphere hits and parallel plane misses.
- Distance tests now check cylinder-cylinder nearest points; raycast tests include tangent cylinder hits.
- Distance tests include a rotated plane case for sphere-plane queries.
- Distance tests include rotated box/cylinder plane cases, and raycast tests include rotated box hits.
- Raycast tests include rotated cylinder hits.
- Distance tests include a group-group distance case to validate pair selection.
- Distance tests include diagonal box-box coverage for oblique nearest points.
- Distance tests include group-group filter coverage for distance queries.
- Distance tests include overlapping sphere coverage for negative distances.
- Distance tests include overlapping box coverage for negative distances.
- Distance tests include overlapping cylinder-plane coverage for negative distances.
- Distance tests include single-group filter coverage for distance queries.
- Distance tests include group-group shared-object skip coverage.
- Distance tests include diagonal cylinder-cylinder coverage for oblique separation.
- Distance tests include rotated box-box coverage for aligned separation.
- Distance tests include coverage for filters rejecting all pairs.
- Distance tests include rotated box-cylinder coverage for axial separation.
- Distance tests include ellipsoid-as-sphere coverage.
- Raycast tests include ellipsoid-as-sphere coverage.
- Collision tests include ellipsoid-as-sphere coverage.
- Distance tests include empty-group coverage for single and group-group queries.
- Distance pruning skips separated pairs once a negative minimum distance is found.
- Distance tests include diagonal sphere-cylinder coverage for oblique separation.
- Distance tests include overlapping sphere-plane coverage for negative distances.
- Distance tests include overlapping box-plane coverage for negative distances.
- Distance tests include plane offset coverage for sphere queries; raycast tests include plane offset hits.
- Distance tests include a tilted cylinder-plane case for oblique extent coverage.
- Distance tests include DistanceResult clamping status coverage.
- Raycast tests include zero-length ray coverage.
- Distance tests include coverage for DistanceOption without nearest points.

## Completed Checkpoints
- Core engine path wired into the DART detector with AABB prechecks.
- Sweep-based broadphase candidate generation for single and group queries.
- Primitive narrowphase coverage for sphere, box, cylinder, and plane pairs.
- Added box-cylinder and cylinder-cylinder narrowphase support with DART-only unit tests.
- Added a DART-focused distance unit test suite for primitives.
- Added a DART distance benchmark and expanded distance edge-case tests.
- Raycast support for primitives plus DART-only unit coverage.
- Added a DART collision benchmark variant for baseline tracking.
- Added sweep-based pruning for distance queries with AABB lower bounds.
- Documented the core/adapter boundary and raycast placement in the architecture proposal.
- Expanded distance tests for sphere-plane, sphere-box, sphere-cylinder, and box-cylinder.
- Added inside-hit raycast coverage for sphere, box, and cylinder.
- Added rotated box distance coverage and a rotated plane raycast check.
- Added tangent sphere and parallel plane raycast coverage.
- Added cylinder-cylinder nearest-point checks and tangent cylinder raycast coverage.
- Added rotated plane distance coverage for sphere-plane.
- Added rotated box raycast coverage and rotated box/cylinder plane distance checks.
- Added rotated cylinder raycast coverage.
- Added group-group distance coverage to validate pair selection and nearest points.
- Added diagonal box-box distance coverage to validate oblique nearest points.
- Added group-group distance filter coverage to validate filter application.
- Added overlapping sphere distance coverage for negative distance semantics.
- Added overlapping box distance coverage for negative distance semantics.
- Added overlapping cylinder-plane distance coverage for negative distance semantics.
- Added single-group distance filter coverage.
- Added group-group distance coverage for shared-object skipping.
- Added diagonal cylinder-cylinder distance coverage for oblique separation.
- Added rotated box-box distance coverage for aligned separation.
- Added distance coverage for filters rejecting all pairs.
- Added rotated box-cylinder distance coverage for axial separation.
- Added ellipsoid-as-sphere distance coverage.
- Added ellipsoid-as-sphere raycast coverage.
- Added ellipsoid-as-sphere collision coverage.
- Added empty-group distance coverage for single and group-group queries.
- Tightened distance AABB pruning once a penetrating pair is found.
- Added diagonal sphere-cylinder distance coverage for oblique separation.
- Added overlapping sphere-plane distance coverage for negative distance semantics.
- Added overlapping box-plane distance coverage for negative distance semantics.
- Added plane offset coverage for sphere distance and raycast queries.
- Added tilted cylinder-plane distance coverage for oblique extent checks.
- Added DistanceResult clamping status coverage.
- Added zero-length raycast coverage.
- Added coverage for DistanceOption without nearest points.

## Next Steps
- Expand distance coverage for additional rotated or oblique configurations and refine nearest-point accuracy.
- Extend raycast coverage to additional edge cases and future shape types.
- Decide when to move raycast into the core engine once query types stabilize.
