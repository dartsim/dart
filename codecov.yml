# Reference: https://github.com/codecov/support/wiki/Codecov-Yaml
#
# Coverage Policy:
# - Project: No regression allowed (auto-tracks current coverage)
# - Patch: New code should be reasonably covered (70%+)

coverage:
  status:
    project:
      default:
        target: auto # Track current coverage, prevent regression
        threshold: 1% # Allow 1% fluctuation for measurement noise
    patch:
      default:
        target: 70% # New code should be reasonably tested

  ignore:
    # Test code (coverage of tests themselves isn't meaningful):
    - "tests"
    - "dart/external"

    # GUI - hard to test in CI without headless rendering
    - "dart/gui"

    # Generated/config files:
    - "dart/config.hpp"

    # Experimental APIs under heavy development
    - "dart/simulation/experimental/**"

    # Deprecated code scheduled for removal:
    - "**/SmartPointer.hpp"

comment:
  layout: "diff, flags, files"
  require_changes: true
