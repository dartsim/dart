# Reference: https://github.com/codecov/support/wiki/Codecov-Yaml
#
# Test Coverage Audit Task: docs/dev_tasks/test-coverage/
# Targets: 85% overall, 90% for core modules

coverage:
  status:
    project:
      default:
        target: 85% # Phase 3 target
        threshold: 2% # Allow 2% fluctuation
    patch:
      default:
        target: 85% # Require new code to meet standard

  ignore:
    # Correct exclusions (keep):
    - "tests"
    - "dart/external"

    # GUI - hard to test in CI without headless rendering
    # BACKLOG: Revisit when headless CI is feasible (see docs/dev_tasks/test-coverage/03-backlog.md)
    - "dart/gui"

    # Generated/config files:
    - "dart/config.hpp"

    # Experimental APIs under heavy development
    # BACKLOG: Test when APIs stabilize (see docs/dev_tasks/test-coverage/03-backlog.md)
    - "dart/simulation/experimental/**"

    # Deprecated code scheduled for removal:
    - "**/SmartPointer.hpp"

comment:
  layout: "diff, flags, files"
  require_changes: true
